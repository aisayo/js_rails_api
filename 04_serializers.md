# Hello, Serializers

- Serializers allow us to encapsulate our modifications to our data structures and distribute it to our controller actions much more organized
- There are a few serializers to use: [ActiveModel Serializer](https://github.com/rails-api/active_model_serializers/blob/0-10-stable/docs/general/getting_started.md) and [fast JSON:API](https://github.com/Netflix/fast_jsonapi)

#### ActiveModel Serializer

- Add to Gemfile: `gem 'active_model_serializers'`
- Run `bundle`
- Run `rails g serializer serialized_model`
- Navigate to folder/files generated by the last command
- Use `attributes` method to determine which attributes are to be returned in the response:
    ```
    class PostSerializer < ActiveModel::Serializer
      attributes :id, :title, :description
    end
    ```
- Controller should look like:
    ```
        def index
            authors = Author.all 
            render json: authors
        end 
    ```

#### fast JSON:API

- Add to Gemfile: `gem 'fast_jsonapi'`
- Run `bundle`
- Run `rails g serializer Model attribute`
- Navigate to folders/files generated by the last command
- Serializer class should look like:
```
    class ModelSerializer
        include FastJsonapi::ObjectSerializer
        attributes :name, :year
        belongs_to :parent_object # this will return related object, in order to so, this object must have a serializer initialized as well
    end
```
- Controller will now look like:
```
    def index
        models = Model.all 
        render json: ModelSerializer.new(models)
    end 
```

- To include associated objects as well:

```
    def index
        models = Model.all 
        render json: ModelSerializer.new(models, {include: [:associated_object]})
    end 
```

- this will be provided as a value to the `included` key in JSON response